{% extends 'base.html' %}
<!-- prettier-ignore -->
{% block title %} {{ title }} {% endblock %} 
{% block content %}
<div class="container">
  <div class="d-flex justify-content-between align-items-center my-3">
    <h1>{{ title }}</h1>
    <a href="{% url 'product-add' %}" class="btn btn-success"
      >Ajouter un produit</a
    >
  </div>
  <form method="GET" action="" class="d-flex justify-content-between align-items-center my-3 gap-2">
    <input class="form-control" type="text" name="search" placeholder="Tapez ici votre recherche"
    value="{{ request.GET.search }}">
    <button type="submit" class="btn btn-success">Rechercher</button>
  </form>
  {% if results > 1 %}
  <p class="text-end"><strong>{{ results }}</strong> résultats</p>
  {% else %}
  <p class="text-end"><strong>{{ results }}</strong> résultat</p>
  {% endif %}
  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Nom</th>
        <th scope="col">Prix HT</th>
        <th scope="col">Stock</th>
        <th scope="col">Fournisseurs</th>
        <th scope="col">Date de création</th>
      </tr>
    </thead>
    <tbody>
      {% for product in products %}
      <tr
        onclick="window.location.href=`{% url 'product' product.id %}`"
        style="cursor: pointer"
      >
        <td>{{ product.name }}</td>
        <td>{{ product.price_ht }}</td>
        <td>{{ product.stock }}</td>
        <td>{{ product.providers }}</td>
        <td>{{ product.date_creation }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
